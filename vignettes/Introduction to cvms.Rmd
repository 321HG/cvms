---
title: "Introduction to cvms"
author: 
  - "Ludvig Renbo Olsen"
date: "`r Sys.Date()`"
abstract: |
  This vignette is an introduction to the package cvms.  
  Cross-validation for model selection.  
  &nbsp;  
  &nbsp;  
  Contact author at r-pkgs@ludvigolsen.dk
  &nbsp;  
  &nbsp;  
  
  -----
output: 
  rmarkdown::html_vignette:
    css: 
    - !expr system.file("rmarkdown/templates/html_vignette/resources/vignette.css", package = "rmarkdown")
    - styles.css
    fig_width: 6
    fig_height: 4
    toc: yes
    number_sections: no
  rmarkdown::pdf_document:
    highlight: tango
    number_sections: yes
    toc: yes
    toc_depth: 4
vignette: >
  %\VignetteIndexEntry{Introduction to cvms}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Attach packages

```{r}
library(cvms)
library(groupdata2) # fold() 
library(dplyr) # %>% 
library(knitr) # kable()

```

# Loading data
We will use the mtcars dataset from base R.

```{r}
require(graphics)

df = mtcars %>% 
  mutate(am = as.factor(am))

df %>% head() %>% kable()
```

# Using cross_validate() 

## Arguments  

model: 'y~a+b+(1|c)'  

data: Dataframe  

id_column: Unique identifiers (e.g. subject, ID, or likewise)  

cat_col: categorical column for balancing folds  

nfolds: number of folds  

family: gaussian or binomial  

REML: Restricted Maximum Likelihood  

cutoff: For deciding prediction class from prediction (binomial)  

positive: Level from dependent variable to predict (1/2) (Levels are alphabetically ordered) (binomial)  

do.plot: ROC curve plot (binomial)  

which_plot: choice between available plots  
- 'all' plots  
- single plot (e.g. 'RMSE')  
- list of plots (e.g. c('RMSE', 'r2'))  

plot_theme: which theme to use with ggplot2  

seed: A number for setting seed. Makes sure the folds are the same for model comparison.  

model_verbose: Printed feedback on the used model (lm() / lmer() / glm() / glmer()) (BOOL)  
